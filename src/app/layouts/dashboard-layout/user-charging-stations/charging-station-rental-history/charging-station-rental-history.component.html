<section>
  <div class="my-28 flex flex-col gap-6 px-4 sm:ml-80 md:p-10">
    <!-- TITRE -->
    <div>
      <h2 class="text-xl font-semibold text-bleu-electrique">
        Historique des locations de vos bornes
      </h2>
      <p class="text-sm text-gray-500 mt-1">
        R√©servations effectu√©es par des utilisateurs sur vos bornes
      </p>
    </div>

    <!-- ===== TABLEAU DESKTOP ===== -->
    <div class="hidden md:block overflow-hidden rounded-lg border border-gray-200 bg-white shadow-md">
      <!-- HEADER -->
      <div
        class="grid grid-cols-7 gap-4 bg-gray-50 px-6 py-4 text-xs font-semibold uppercase tracking-wider text-bleu-foncee border-b">
        <div>Date r√©servation</div>
        <div>Nom borne</div>
        <div>Statut</div>
        <div>Locataire</div>
        <div>P√©riode</div>
        <div>Heures</div>
        <div>Prix total</div>
      </div>

      <!-- LIGNES -->
      <div *ngFor="let booking of allBookings"
           class="grid grid-cols-7 gap-4 px-6 py-4 border-b hover:bg-gray-50">

        <div class="text-sm">
          {{ booking.createdAt | date:'shortDate' }}
        </div>

        <div class="font-semibold">
          {{ booking.stationName }}
        </div>

        <div>
          <select
            [(ngModel)]="booking.status"
            (change)="onStatusChange(booking, $event)"
            class="w-28 rounded-md px-3 py-1 pr-8 text-sm font-medium border shadow-sm
            focus:ring focus:ring-opacity-50"
            [ngClass]="{
              'bg-orange-100 text-orange-600 border-orange-300':
                booking.status === BookingStatus.PENDING,
              'bg-green-100 text-green-600 border-green-300':
                booking.status === BookingStatus.CONFIRMED,
              'bg-red-100 text-red-600 border-red-300':
                booking.status === BookingStatus.CANCELLED
            }">
            <option *ngFor="let status of availableBookingStatuses" [value]="status">
              {{ status }}
            </option>
          </select>
        </div>

        <div class="text-bleu-electrique font-medium">
          M.Mme ‚Äì {{ booking.user.name }} {{ booking.user.firstName }}
        </div>

        <div class="text-sm text-gray-600">
          du {{ booking.startDate | date:'shortDate' }}<br />
          au {{ booking.endDate | date:'shortDate' }}
        </div>

        <div class="text-sm text-gray-600">
          {{ booking.startDate | date:'shortTime' }} ‚Üí {{ booking.endDate | date:'shortTime' }}
        </div>

        <div class="font-bold">
          {{ booking.totalAmount }}‚Ç¨
        </div>
      </div>
    </div>

    <!-- ===== CARTES MOBILE ===== -->
    <div class="flex flex-col gap-4 md:hidden">
      <div *ngFor="let booking of allBookings"
           class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">

        <!-- HEADER -->
        <div class="flex justify-between items-start mb-3">
          <div>
            <p class="text-sm text-gray-500">
              {{ booking.createdAt | date:'shortDate' }}
            </p>
            <p class="font-semibold text-lg">
              {{ booking.stationName }}
            </p>
          </div>

          <select
            [(ngModel)]="booking.status"
            (change)="onStatusChange(booking, $event)"
            class="w-28 rounded-md px-3 py-1 pr-8 text-xs font-medium border shadow-sm"
            [ngClass]="{
              'bg-orange-100 text-orange-600':
                booking.status === BookingStatus.PENDING,
              'bg-green-100 text-green-600':
                booking.status === BookingStatus.CONFIRMED,
              'bg-red-100 text-red-600':
                booking.status === BookingStatus.CANCELLED
            }">
            <option *ngFor="let status of availableBookingStatuses" [value]="status">
              {{ status }}
            </option>
          </select>
        </div>

        <!-- LOCATAIRE -->
        <p class="text-sm mb-2">
          <span class="font-semibold">Locataire :</span>
          <span class="text-bleu-electrique">
            M.Mme ‚Äì {{ booking.user.name }} {{ booking.user.firstName }}
          </span>
        </p>

        <!-- PERIODE -->
        <p class="text-sm text-gray-600">
          üìÖ du {{ booking.startDate | date:'shortDate' }}
          au {{ booking.endDate | date:'shortDate' }}
        </p>

        <p class="text-sm text-gray-600 mt-1">
          ‚è∞ {{ booking.startDate | date:'shortTime' }} ‚Üí {{ booking.endDate | date:'shortTime' }}
        </p>

        <!-- PRIX -->
        <div class="flex justify-between items-center mt-4 pt-2 border-t">
          <span class="text-sm text-gray-500">Prix total</span>
          <span class="text-lg font-bold">{{ booking.totalAmount }}‚Ç¨</span>
        </div>
      </div>
    </div>
  </div>
</section>
